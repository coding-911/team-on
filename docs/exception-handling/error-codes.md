# TeamOn 에러 코드 체계

## 에러 코드 구조

TeamOn의 에러 코드는 4자리 숫자로 구성되며, 각 자리는 다음과 같은 의미를 가집니다:

```
X Y Z Z
│ │ └─── 에러의 성격 (마지막 두 자리)
│ └─────── 도메인 내 하위 분류
└───────── 도메인 구분
```

### 도메인 구분 (첫 번째 자리)

- 1xxx: 공통 에러
- 2xxx: 인증 도메인
- 3xxx: 태스크 도메인
- 4xxx: 사용자/조직 도메인
- 5xxx: 근태 도메인
- 6xxx: 파일 도메인
- 7xxx: 알림 도메인
- 9xxx: 시스템 도메인

### 도메인 내 하위 분류 (두 번째 자리)

- 0: 기본/일반
- 1: 파일/문서 관련
- 2: 상태/상태 전이
- 3: 권한/인증
- 4: 데이터/값 검증
- 5: 외부 연동
- 6: 비즈니스 로직
- 7: 시스템/인프라
- 8: 배치/스케줄링
- 9: 기타

### 에러의 성격 (마지막 자리)

- 1: 조회/찾기 실패
- 2: 중복/이미 존재
- 3: 유효하지 않은 상태/값
- 4: 권한/인증 관련
- 5: 제한/초과
- 6: 외부 서비스/연동 실패
- 7: 비즈니스 규칙 위반
- 8: 시스템 오류
- 9: 기타 오류

## 에러 코드 예시

### 파일 도메인 (6xxx)
- 6001: 파일을 찾을 수 없음 (기본-찾기 실패)
- 6106: 파일 내보내기 실패 (문서-외부 서비스 실패)
- 6403: 허용되지 않는 파일 유형 (데이터 검증-유효하지 않은 값)
- 6405: 파일 크기 초과 (데이터 검증-제한 초과)

### 사용자/조직 도메인 (4xxx)
- 4001: 사용자를 찾을 수 없음 (기본-찾기 실패)
- 4002: 사용자가 이미 존재함 (기본-중복)
- 4203: 사용자가 비활성 상태 (상태-유효하지 않은 상태)
- 4601: 회사를 찾을 수 없음 (비즈니스 로직-찾기 실패)

## API 응답 형식

모든 에러는 다음과 같은 일관된 JSON 형식으로 반환됩니다:

```json
{
    "code": 6405,
    "message": "파일 크기가 허용된 최대 크기를 초과했습니다",
    "data": {
        "max_size": "10MB",
        "current_size": "15MB"
    }
}
```

## 에러 처리 가이드라인

1. 새로운 에러 코드 추가 시:
   - 적절한 도메인 영역 선택
   - 도메인 내 올바른 하위 분류 지정
   - 에러의 성격에 맞는 마지막 자리 선택
   - `constants.py`에 코드 추가 및 주석으로 설명 기재

2. 에러 메시지 작성 시:
   - 명확하고 구체적인 메시지 작성
   - 가능한 경우 문제 해결 방법 제시
   - 필요한 경우 추가 정보를 data 필드에 포함

3. 프론트엔드 처리:
   - 에러 코드를 기반으로 적절한 UI/UX 제공
   - 사용자가 이해하기 쉬운 메시지로 변환
   - 필요한 경우 재시도 또는 대체 작업 제안 